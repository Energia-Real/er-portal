<div class="c-main px-16">
    <div class="d-flex justify-end">
        <div class="c-input mb-0">
            <mat-form-field class="select-years" appearance="outline">
              <mat-select placeholder="Select year" [(value)]="selectedYears" (valueChange)="searchWithFilters()">
                <mat-option *ngFor="let month of years; let i = index" [value]="month">
                  {{ month.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
    </div>

    <app-energy-prod-update [isOpen]="drawerOpenClient" [modeDrawer]="drawerAction"
    [equipment]="drawerInfo"></app-energy-prod-update>


    <div class="c-table">
        <table mat-table [dataSource]="dataSource" matSort class="table-assets guion-click">
            <ng-container matColumnDef="clientName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Name of the site </th>
                <td mat-cell *matCellDef="let element" class="font-semibold column-ipervinculo"> {{ element?.name }}
                </td>
            </ng-container>

            <ng-container matColumnDef="mes1">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>January</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes1 else notDataTable" > {{ element.mes1 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes2">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>February</th>
                <td mat-cell *matCellDef="let element" >
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes2 else notDataTable"> {{ element.mes2 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes3">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>March</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes3 else notDataTable"> {{ element.mes3 }} </div>
                    </div>
                </td>
                
            </ng-container>

            <ng-container matColumnDef="mes4">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>April</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes4 else notDataTable"> {{ element.mes4 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes5">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>May</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes5 else notDataTable"> {{ element.mes5 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes6">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>June</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes6 else notDataTable"> {{ element.mes6 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes7">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>July</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes7 else notDataTable"> {{ element.mes7 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes8">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>August</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes8 else notDataTable"> {{ element.mes8 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes9">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>September</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes9 else notDataTable"> {{ element.mes9 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes10">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>October</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes10 else notDataTable"> {{ element.mes10 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes11">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>November</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes11 else notDataTable"> {{ element.mes11 }} </div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="mes12">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>December</th>
                <td mat-cell *matCellDef="let element">
                    <div (click)="toggleDrawerClient(element)">
                        <div *ngIf="element?.mes12 else notDataTable"> {{ element.mes12 }} </div>
                    </div>
                </td>
            </ng-container>

            <tr *matNoDataRow>
                <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                    <h5 class="text-center my-5">No results found.</h5>
                </td>
            </tr>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="tr-table-assets"></tr>
        </table>

        <mat-paginator #paginator class="c-paginator" [length]="totalItems" [pageSize]="pageSize"
            [pageSizeOptions]="pageSizeOptions" (page)="getServerData($event)" showFirstLastButtons
            aria-label="Select page of periodic elements">
        </mat-paginator>
    </div>
</div>

<ng-template #notData>
    <div class="no-data-found d-flex justify-center">
        <app-message-no-data [message]="'The information could not be loaded.'"></app-message-no-data>
    </div>
</ng-template>

<ng-template #notDataTable>
    <app-message-no-data [message]="'The requested information is not available.'"></app-message-no-data>
</ng-template>