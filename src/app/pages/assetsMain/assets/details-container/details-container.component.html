<div class="home-main-container" *ngIf="!showLoader">
  <div class="home-header-container">
    <app-return-bar urlToGo="/assets/management"></app-return-bar>
    <div class="info-asset-container pt-3">
      <h1>{{assetData.siteName}}</h1>
      <p [matTooltip]="!addressPlace ? 'La información no pudo ser cargada.' : ''">Dirección aproximada: {{addressPlace ? addressPlace : '-'}}</p>
    </div>
    
    <div class="info-weather-container">
      <div class="weather-flex-container">
        <div [ngClass]="{'spinner-center': loadingWeatherData}" class="card-weather-container" [ngStyle]="{'background-color': weatherData?.color}">
          <span *ngIf="loadingWeatherData" class="loader" matTooltip="Cargando..."></span>
       
          <div *ngIf="weatherData">
            <i class="mb-2" [ngClass]="weatherCode[weatherData.weatherCode].icon"></i>
            <p>{{weatherData.temperature | number:'1.1-1'}}°C {{weatherCode[weatherData.weatherCode].text}}</p>
          </div>
        </div>

        <div class="card-weather-container card-weather-center spinner-center">
          <span *ngIf="!timeZoneOffset" class="loader" [matTooltip]=" !timeZoneOffset ? 'La información no pudo ser cargada.' : 'Cargando...'"></span>

          <div *ngIf="timeZoneOffset">
            <p>Hora local</p>
            <p class="card-value">{{timeZonePlace | date:'hh:mm aa'}}</p>
          </div>
        </div>

        <div class="card-weather-container card-weather-center" [ngClass]="{ 'spinner-center': !dataRespoSystem }">
          <span *ngIf="!dataRespoSystem" class="loader" [matTooltip]=" systemShowAlert ? 'La información no pudo ser cargada.' : 'Cargando...'"></span>

          <div *ngIf="dataRespoSystem">
            <p>Tamaño del sistema</p>
            <p class="card-value">{{ dataRespoSystem.total_power | number:'1.2-2' }}</p>
          </div>
        </div>

        <div class="card-weather-container card-status-system" 
          [ngClass]="{ 'spinner-center': !dataRespoSystem }"
          [ngStyle]="{ 'background-color': dataRespoSystem?.real_health_state == 'healthy' ? '#a1efef' : '#efa1a1' }">
          
          <span *ngIf="!dataRespoSystem" class="loader" [matTooltip]=" systemShowAlert ? 'La información no pudo ser cargada.' : 'Cargando...'"></span>
      
          <div *ngIf="dataRespoSystem">
            <i *ngIf="dataRespoSystem.real_health_state == 'healthy'" class="fa-solid fa-check mb-2"></i>
            <i *ngIf="dataRespoSystem.real_health_state != 'healthy'" class="fa-solid fa-xmark mb-2"></i>
            <p>Sistema</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="home-tabs-main-container">
    <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" [selectedIndex]="1">

      <mat-tab label="Overview">
        <app-overview-details [assetData]="assetData"></app-overview-details>
      </mat-tab>

      <mat-tab label="Site details">
        <app-site-details [assetData]="assetData"></app-site-details>
      </mat-tab>

      <mat-tab label="Site performance">En desarrollo...</mat-tab>
      
      <mat-tab label="FAQ">En desarrollo... </mat-tab>

    </mat-tab-group>
  </div>
</div>