<input #fileInput type="file" hidden (change)="onFileSelected($event)" />

<div class="c-main">
    <div class="flex justify-between">
        <h1 class="label-700-24">
            {{ 'MODELO_FINANCIERO.EJECUTAR_MODELO' | translate }}
        </h1>
        <div class="c-card-section c-model w-2/3">
            <div class="grid md:grid-cols-4 gap-3 text-center div-groups-model">
                <div class="flex flex-col justify-around px-5">
                    <button class="flex btn-action-add" (click)="openFileSelector()">
                        <img src="../../../../assets/svg/upload_white.svg" alt="Icon notification"
                            class="notification-icon" />
                        <div>
                            {{ 'MODELO_FINANCIERO.SUBIR_DOCUMENTO' | translate }}
                        </div>
                    </button>
                    <button class="flex btn-cancel" (click)="donwloadTemplate()">
                        <div>
                            {{ 'MODELO_FINANCIERO.DESCARGAR_PLANTILLA' | translate }}
                        </div>
                    </button>
                    <div class="linea"></div>
                </div>
                <div class="flex flex-col justify-center gap-2">
                    <p>{{ 'MODELO_FINANCIERO.ESTADO' | translate }}</p>
                    <div *ngIf="processStatus!=null else notData">
                        <div *ngIf="processStatus == 'Success'" class="flex justify-center">
                            <img src="../../../../assets/svg/success_green.svg" alt="Icon notification"
                                class="notification-icon" />
                        </div>
                        <div *ngIf="processStatus == 'Error'" class="flex justify-center">
                            <img src="../../../../assets/svg/delete-circle.svg" alt="Icon notification"
                                class="notification-icon" />
                        </div>
                    </div>
                    <div class="linea"></div>
                </div>
                <div class="flex flex-col justify-center gap-2">
                    <p>{{ 'MODELO_FINANCIERO.NUMERO_ESCENARIOS' | translate }}</p>

                    <div *ngIf="scenarios != null else notData">
                        <div *ngIf="scenarios" class="scenarios">
                            {{scenarios}}
                        </div>
                    </div>
                    <div class="linea"></div>

                </div>
                <div class="flex flex-col justify-around px-5">
                    <button class="flex btn-action-add" [disabled]="fileId==null" (click)="getInformation()">
                        <div>
                            {{ 'MODELO_FINANCIERO.DESCARGAR_EXCEL' | translate }}
                        </div>
                    </button>
                    <button class="flex btn-cancel" [disabled]="!fileId" (click)="createNotificationModal(DELETE)">
                        <div>
                            {{ 'MODELO_FINANCIERO.ELIMINAR' | translate }}
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Nueva sección para la gráfica D3.js -->
    <div class="mt-8">
        <h2 class="label-700-24 mb-4">Visualización de Datos Financieros</h2>
        <div class="c-card-section p-4">
            <div class="flex justify-between mb-4">
                <div>
                    <button class="btn-action-add mr-2" (click)="generateData()">
                        Generar Datos
                    </button>
                    <button class="btn-cancel" (click)="clearChart()">
                        Limpiar Gráfica
                    </button>
                </div>
                <div>
                    <select class="form-select" [(ngModel)]="chartType" (change)="updateChart()">
                        <option value="line">Gráfica de Línea</option>
                        <option value="bar">Gráfica de Barras</option>
                        <option value="area">Gráfica de Área</option>
                    </select>
                </div>
            </div>
            <div class="chart-container" style="height: 500px;">
                <div #chartContainer class="w-full h-full"></div>
            </div>
        </div>
    </div>
</div>

<ng-template #notData>
    <div class="no-data-found d-flex justify-center">
        <app-message-no-data [message]="'MODELO_FINANCIERO.INFO_NO_CARGADA' | translate"></app-message-no-data>
    </div>
</ng-template>
