<div class="main-container">
    <div class="register-form-container">
      <div class="register-header-container">
        <img src="./assets/svg/logo.svg" alt="logo energia real">
        <h2>Crear cuenta</h2>
        <p>Ingresa tus datos para crear tu cuenta</p>
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="errorCreate">
        {{messageError}}
      </div>
      <div class="alert alert-success" role="alert" *ngIf="successfulCreate">
        ¡Cuenta creada con éxito! <br>
        Serás redireccionado al login
      </div>
      <div class="register-inputs-component">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <div class="form-group-container">
            <input type="text" id="nombre" formControlName="name" required placeholder="Nombre">
            <div class="message-error">
              <p *ngIf="registerForm.get('name')?.value == '' && (registerForm.get('name')?.dirty || registerForm.get('name')?.touched)">Debe agregar un nombre</p>
            </div>
          </div>
      
          <div class="form-group-container">
            <input type="text" id="apellido" formControlName="lastname" required placeholder="Apellido">
            <div class="message-error">
              <p *ngIf="registerForm.get('lastname')?.value == '' && (registerForm.get('lastname')?.dirty || registerForm.get('lastname')?.touched)">Debe agregar un apellido</p>
            </div>
          </div>
      
          <div class="form-group-container input-email-container">
            <input type="email" id="email" formControlName="email" required placeholder="Correo">
            <div class="message-error">
              <p *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)">Correo inválido</p>
            </div>
          </div>
      
          <div class="form-group-container">
            <div class="password-input-container">
              <input type="{{ showPassword ? 'text' : 'password' }}" id="password" formControlName="password" required placeholder="Contraseña">
              <span class="eye-icon" (click)="togglePasswordVisibility(1)">
                <img *ngIf="showPassword" src="./assets/svg/open-eye.svg" alt="Eye Open">
                <img *ngIf="!showPassword" src="./assets/svg/closed-eye.svg" alt="Eye Closed">
              </span>
            </div>
            <div class="message-error">
              <p *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)">La contraseña debe tener al menos una mayúscula, una minúscula, un número y un carácter especial, con una longitud mínima de 8 caracteres</p>
            </div>
          </div>
      
          <div class="form-group-container">
            <div class="password-input-container">
              <input type="{{ showConfirmPassword ? 'text' : 'password' }}" id="passwordConfirm" formControlName="passwordConfirm" required placeholder="Confirmar contraseña">
              <span class="eye-icon" (click)="togglePasswordVisibility(2)">
                <img *ngIf="showPassword" src="./assets/svg/open-eye.svg" alt="Eye Open">
                <img *ngIf="!showPassword" src="./assets/svg/closed-eye.svg" alt="Eye Closed">
              </span>
            </div>
            <div class="message-error">
              <p *ngIf="registerForm.get('passwordConfirm')?.hasError('pattern') && (registerForm.get('passwordConfirm')?.dirty || registerForm.get('passwordConfirm')?.touched)">La contraseña debe tener al menos una mayúscula, una minúscula, un número y un carácter especial, con una longitud mínima de 8 caracteres</p>
              <p *ngIf="registerForm.get('passwordConfirm')?.hasError('noCoincide')">Las contraseñas no coinciden</p>
            </div>
          </div>
          <div class="button-container">
            <span class="loader" *ngIf="loading"></span>
            <button class="button-primary" *ngIf="!loading" type="submit" [disabled]="registerForm.invalid || buttonDisabled">Crear cuenta</button>
          </div>
        </form>
      </div>
      <div class="register-footer-container">
        <a routerLink="/">¿Ya tienes una cuenta?</a>
      </div>
    </div>
  </div>  